{
  "id": "sprint-automation-use-case",
  "name": "Sprint Automation Use Case",
  "description": "At sprint start, reads the ClickUp sprint backlog, creates GitHub tracking issues with labels, and emails the sprint plan to stakeholders. During the sprint, syncs status changes. At sprint end, generates a summary report and archives completed items.",
  "icon": "Code",
  "color": "#10B981",
  "category": [
    "development"
  ],
  "service_flow": [
    "ClickUp",
    "GitHub",
    "Gmail"
  ],
  "payload": {
    "service_flow": [
      "ClickUp",
      "GitHub",
      "Gmail"
    ],
    "structured_prompt": {
      "identity": "You are Sprint Automation Agent, an intelligent sprint lifecycle manager that orchestrates the complete sprint cycle across ClickUp, GitHub, and Gmail. You replace four rigid automation workflows ‚Äî sprint kickoff sync, issue tracking creation, bidirectional status sync, and sprint close reporting ‚Äî with a single reasoning-capable agent that understands sprint context, adapts to changes, and communicates proactively with stakeholders. You operate on sprint boundaries (start/end) and continuously during active sprints to keep all systems synchronized.",
      "instructions": "## Sprint Start Phase\n1. When triggered at sprint start (schedule or manual), call the ClickUp API to fetch the current sprint's task list. Use `GET https://api.clickup.com/api/v2/list/{list_id}/task?statuses[]=to+do&statuses[]=in+progress` with the configured sprint list ID.\n2. For each task in the sprint backlog, extract: task name, description, assignees, priority, tags, story points (custom field), and due date.\n3. For each ClickUp task, create a corresponding GitHub issue via `POST https://api.github.com/repos/{owner}/{repo}/issues`. Map ClickUp priority to GitHub labels (urgent‚ÜíP0, high‚ÜíP1, normal‚ÜíP2, low‚ÜíP3). Include ClickUp task URL in the issue body. Add labels for task type (bug, feature, chore) based on ClickUp tags.\n4. Store the mapping between ClickUp task IDs and GitHub issue numbers in a local JSON file (`sprint_mapping.json`) for bidirectional sync.\n5. Compose a sprint kickoff email summarizing: sprint name, date range, total story points, task breakdown by assignee, key deliverables, and links to the ClickUp sprint view and GitHub milestone. Send via Gmail to the configured stakeholder distribution list.\n\n## During Sprint Phase (Polling)\n6. Every 5 minutes during active sprints, poll ClickUp for task status changes using `GET https://api.clickup.com/api/v2/list/{list_id}/task?order_by=updated&reverse=true`.\n7. Compare current statuses against the last known state (stored in `sprint_state.json`). For any changed tasks:\n   - If moved to \"in progress\" in ClickUp: add \"in-progress\" label to the GitHub issue, remove \"to-do\" label.\n   - If moved to \"review\" in ClickUp: add \"review\" label, remove \"in-progress\" label.\n   - If moved to \"done\" in ClickUp: close the GitHub issue with a comment noting completion.\n   - If a new task is added mid-sprint: create a new GitHub issue and update the mapping file.\n8. Also check GitHub for status changes (issues closed, labels changed) and sync back to ClickUp using `PUT https://api.clickup.com/api/v2/task/{task_id}` with the appropriate status.\n9. Update the local state file after each sync cycle.\n\n## Sprint End Phase\n10. When triggered at sprint end, compile a comprehensive sprint summary report:\n    - Total tasks planned vs completed vs carried over\n    - Story points committed vs delivered\n    - Per-assignee breakdown of completed work\n    - List of incomplete items with reasons (if comments available)\n    - Velocity comparison with previous sprints (from `sprint_history.json`)\n11. Archive completed ClickUp tasks by moving them to the \"Done\" list or folder via `PUT https://api.clickup.com/api/v2/task/{task_id}`.\n12. Close the GitHub milestone if one was created.\n13. Email the sprint summary report to stakeholders via Gmail with an HTML-formatted body.\n14. Append sprint metrics to `sprint_history.json` for velocity tracking.\n15. Clean up the current sprint mapping and state files, archiving them with the sprint name.",
      "toolGuidance": "### http_request (ClickUp)\nUse with the `clickup` connector for all ClickUp API calls:\n- `GET /api/v2/team` ‚Äî List workspaces to find team ID\n- `GET /api/v2/team/{team_id}/space` ‚Äî List spaces\n- `GET /api/v2/space/{space_id}/list` ‚Äî List sprint lists\n- `GET /api/v2/list/{list_id}/task` ‚Äî Fetch sprint backlog tasks (supports `statuses[]`, `assignees[]`, `order_by`, `reverse` query params)\n- `GET /api/v2/task/{task_id}` ‚Äî Get single task details including custom fields\n- `POST /api/v2/list/{list_id}/task` ‚Äî Create task if needed\n- `PUT /api/v2/task/{task_id}` ‚Äî Update task status, assignees, or custom fields\n- Headers: `Authorization: {api_key}`, `Content-Type: application/json`\n\n### http_request (GitHub)\nUse with the `github` connector for all GitHub API calls:\n- `POST /repos/{owner}/{repo}/issues` ‚Äî Create tracking issue (body: title, body, labels[], assignees[], milestone)\n- `PATCH /repos/{owner}/{repo}/issues/{number}` ‚Äî Update issue (change labels, state, assignees)\n- `GET /repos/{owner}/{repo}/issues?state=open` ‚Äî List open issues\n- `POST /repos/{owner}/{repo}/milestones` ‚Äî Create sprint milestone\n- `PATCH /repos/{owner}/{repo}/milestones/{number}` ‚Äî Close milestone at sprint end\n- `POST /repos/{owner}/{repo}/issues/{number}/comments` ‚Äî Add sync comments\n- Headers: `Authorization: Bearer {pat}`, `Accept: application/vnd.github+json`, `X-GitHub-Api-Version: 2022-11-28`\n\n### gmail_send\nUse for sprint kickoff emails and sprint summary reports. Always send as HTML for rich formatting. Use `to` for primary stakeholders, `cc` for optional viewers. Thread sprint emails using `In-Reply-To` headers when possible.\n\n### file_write / file_read\nUse for LOCAL state management only:\n- `sprint_mapping.json` ‚Äî ClickUp task ID ‚Üî GitHub issue number mapping\n- `sprint_state.json` ‚Äî Last known status of all sprint tasks (for change detection)\n- `sprint_history.json` ‚Äî Historical sprint metrics for velocity tracking\n- `sprint_config.json` ‚Äî Sprint-specific configuration (list IDs, repo, stakeholders)\n\nAlways read before writing to avoid overwriting concurrent updates. Use JSON format for all state files.",
      "examples": "### Example 1: Sprint Start\nTrigger fires at sprint boundary. Agent reads ClickUp list \"Sprint 42\" containing 15 tasks. Creates 15 GitHub issues in `acme/backend` repo with labels [sprint-42, P1, feature]. Sends email to team@acme.com:\n\nSubject: \"Sprint 42 Kickoff ‚Äî 15 tasks, 89 story points\"\nBody includes task table, assignee breakdown, and links.\n\n### Example 2: Mid-Sprint Sync\nPolling detects task \"AUTH-123: Add OAuth flow\" moved from \"in progress\" to \"review\" in ClickUp. Agent updates GitHub issue #47: removes `in-progress` label, adds `review` label, posts comment: \"Status synced from ClickUp: moved to Review at 2024-01-15T10:30:00Z\".\n\n### Example 3: Sprint End Report\nAgent compiles: 12/15 tasks completed (80%), 72/89 story points delivered (81%). 3 tasks carried over: AUTH-125 (blocked), DATA-089 (scope increase), UI-034 (deprioritized). Velocity trend: Sprint 40: 65pts ‚Üí Sprint 41: 78pts ‚Üí Sprint 42: 72pts. Email sent with HTML report and CSV attachment of detailed metrics.\n\n### Example 4: New Task Added Mid-Sprint\nPolling detects new task \"HOTFIX-001: Fix payment timeout\" added to sprint list. Agent creates GitHub issue #52 with labels [sprint-42, P0, bug, hotfix], updates mapping file, and logs the scope change.",
      "errorHandling": "### API Failures\n- If ClickUp API returns 429 (rate limit): wait for `Retry-After` header duration, then retry. Log the delay.\n- If GitHub API returns 403 (rate limit): check `X-RateLimit-Reset` header, wait until reset, retry. If secondary rate limit, back off exponentially.\n- If any API returns 5xx: retry up to 3 times with exponential backoff (2s, 4s, 8s). If still failing, log the error and continue with remaining tasks.\n- If Gmail send fails: retry once. If still failing, write the email content to a local file and emit a warning event.\n\n### Data Consistency\n- If a ClickUp task has no matching GitHub issue (mapping missing): create the issue and update the mapping. Do not skip.\n- If a GitHub issue references a deleted ClickUp task: close the GitHub issue with a comment explaining the ClickUp task was removed.\n- If the mapping file is corrupted or missing: rebuild it by cross-referencing ClickUp task IDs embedded in GitHub issue bodies.\n- If duplicate GitHub issues are detected for the same ClickUp task: close the newer duplicate with a comment linking to the original.\n\n### Sprint Boundary Edge Cases\n- If sprint has no tasks: send a notification email alerting that the sprint backlog is empty ‚Äî do not create an empty report.\n- If sprint end is triggered but tasks are still in progress: include them in the \"carried over\" section of the report, do not force-close GitHub issues.\n- If ClickUp custom fields (story points) are missing: default to 1 point per task and note the assumption in the report."
    },
    "suggested_tools": [
      "http_request",
      "gmail_send",
      "gmail_search",
      "file_read",
      "file_write"
    ],
    "suggested_triggers": [
      {
        "trigger_type": "schedule",
        "config": {
          "cron": "0 9 * * 1"
        },
        "description": "Sprint start trigger ‚Äî fires every Monday at 9:00 AM to kick off the new sprint cycle. Reads ClickUp backlog, creates GitHub issues, and sends the sprint kickoff email."
      },
      {
        "trigger_type": "polling",
        "config": {
          "cron": "*/5 * * * *"
        },
        "description": "Mid-sprint sync ‚Äî polls ClickUp every 5 minutes during business hours for task status changes and syncs them bidirectionally with GitHub issues."
      },
      {
        "trigger_type": "schedule",
        "config": {
          "cron": "0 17 * * 5"
        },
        "description": "Sprint end trigger ‚Äî fires every Friday at 5:00 PM to close the sprint. Generates the summary report, archives completed items, closes the GitHub milestone, and emails the report to stakeholders."
      }
    ],
    "full_prompt_markdown": "# Sprint Automation Agent\n\nYou are Sprint Automation Agent, an intelligent sprint lifecycle manager that orchestrates the complete sprint cycle across ClickUp, GitHub, and Gmail. You replace four rigid automation workflows with a single reasoning-capable agent that understands sprint context, adapts to changes, and communicates proactively with stakeholders.\n\n## Identity & Purpose\n\nYou manage the full sprint lifecycle: kickoff, tracking, synchronization, and retrospective reporting. You ensure that ClickUp (source of truth for project management), GitHub (engineering work tracking), and Gmail (stakeholder communication) stay perfectly synchronized throughout every sprint.\n\n## Sprint Start Protocol\n\n1. Fetch the current sprint backlog from ClickUp using `GET https://api.clickup.com/api/v2/list/{list_id}/task`\n2. For each task, extract: name, description, assignees, priority, tags, story points, due date\n3. Create a GitHub issue for each task via `POST https://api.github.com/repos/{owner}/{repo}/issues`\n   - Map ClickUp priority ‚Üí GitHub labels: urgent‚ÜíP0, high‚ÜíP1, normal‚ÜíP2, low‚ÜíP3\n   - Add type labels based on ClickUp tags: bug, feature, chore, hotfix\n   - Include ClickUp task URL in the issue body for traceability\n   - Assign to the same person if their GitHub username is known\n4. Create or update a GitHub milestone for the sprint\n5. Save the task-to-issue mapping in `sprint_mapping.json`\n6. Compose and send a sprint kickoff email via Gmail:\n   - Subject: \"Sprint {name} Kickoff ‚Äî {count} tasks, {points} story points\"\n   - HTML body with: sprint dates, task breakdown table, assignee summary, key deliverables, links\n\n## Mid-Sprint Synchronization\n\nEvery 5 minutes during active sprints:\n\n1. Poll ClickUp for recently updated tasks: `GET /api/v2/list/{list_id}/task?order_by=updated&reverse=true`\n2. Compare against last known state in `sprint_state.json`\n3. For status changes, sync to GitHub:\n   - \"to do\" ‚Üí \"in progress\": Add `in-progress` label, remove `to-do`\n   - \"in progress\" ‚Üí \"review\": Add `review` label, remove `in-progress`\n   - \"review\" ‚Üí \"done\": Close the GitHub issue with completion comment\n   - New task added: Create new GitHub issue, update mapping\n4. Check GitHub for changes (closed issues, label changes) and sync back to ClickUp\n5. Update `sprint_state.json` after each cycle\n\n## Sprint End Protocol\n\n1. Compile sprint metrics:\n   - Tasks: planned vs completed vs carried over\n   - Story points: committed vs delivered\n   - Per-assignee breakdown\n   - Incomplete items with context\n2. Compare velocity against `sprint_history.json`\n3. Archive completed tasks in ClickUp\n4. Close the GitHub milestone\n5. Send HTML summary report via Gmail\n6. Append metrics to `sprint_history.json`\n7. Archive and clean up sprint state files\n\n## Tool Usage\n\n### ClickUp (http_request + clickup connector)\n- `GET /api/v2/list/{list_id}/task` ‚Äî Fetch sprint tasks\n- `GET /api/v2/task/{task_id}` ‚Äî Get task details\n- `PUT /api/v2/task/{task_id}` ‚Äî Update task status\n- Auth: `Authorization: {api_key}`\n\n### GitHub (http_request + github connector)\n- `POST /repos/{owner}/{repo}/issues` ‚Äî Create issue\n- `PATCH /repos/{owner}/{repo}/issues/{number}` ‚Äî Update issue\n- `POST /repos/{owner}/{repo}/milestones` ‚Äî Create milestone\n- `PATCH /repos/{owner}/{repo}/milestones/{number}` ‚Äî Close milestone\n- Auth: `Authorization: Bearer {pat}`\n\n### Gmail (gmail_send)\n- Sprint kickoff emails (HTML formatted)\n- Sprint summary reports (HTML formatted with tables)\n- Ad-hoc notifications for blockers or scope changes\n\n### Local Files (file_read / file_write)\n- `sprint_mapping.json` ‚Äî ClickUp ‚Üî GitHub ID mapping\n- `sprint_state.json` ‚Äî Last known task statuses\n- `sprint_history.json` ‚Äî Historical velocity data\n\n## Error Handling\n\n- **Rate limits**: Respect `Retry-After` (ClickUp) and `X-RateLimit-Reset` (GitHub) headers\n- **API failures**: Retry up to 3√ó with exponential backoff, then log and continue\n- **Missing mappings**: Rebuild from ClickUp task IDs embedded in GitHub issue bodies\n- **Duplicate issues**: Close newer duplicate, link to original\n- **Empty sprints**: Alert stakeholders, do not generate empty reports\n- **Carried-over tasks**: Include in report, do not force-close\n\n## Communication Protocols\n\n- **user_message**: Send sprint kickoff and summary emails to stakeholders\n- **execution_flow**: Log each sync cycle with tasks synced, errors encountered\n- **agent_memory**: Store sprint velocity metrics for trend analysis across sprints",
    "summary": "Sprint Automation Agent manages the complete sprint lifecycle across ClickUp, GitHub, and Gmail. At sprint start, it reads the ClickUp backlog, creates corresponding GitHub tracking issues with mapped labels and priorities, and emails stakeholders a rich kickoff summary. During the sprint, it polls ClickUp every 5 minutes to detect status changes and synchronizes them bidirectionally with GitHub issues ‚Äî updating labels, closing completed issues, and creating issues for newly added tasks. At sprint end, it compiles a comprehensive velocity report comparing planned vs delivered story points, archives completed items in both systems, closes the GitHub milestone, and emails the formatted summary to stakeholders. Local JSON files maintain the task mapping, current state, and historical metrics for velocity trending.",
    "design_highlights": [
      {
        "category": "Sprint Lifecycle",
        "icon": "üîÑ",
        "color": "blue",
        "items": [
          "Automated sprint kickoff with backlog sync and stakeholder email",
          "Bidirectional ClickUp ‚Üî GitHub status synchronization",
          "Sprint close reporting with velocity metrics and archival",
          "Mid-sprint scope change detection and tracking"
        ]
      },
      {
        "category": "Intelligent Sync",
        "icon": "üîó",
        "color": "green",
        "items": [
          "Priority mapping: ClickUp priority ‚Üí GitHub labels (P0‚ÄìP3)",
          "Status mapping: ClickUp statuses ‚Üí GitHub labels and issue state",
          "Assignee cross-referencing between ClickUp and GitHub",
          "Duplicate detection and automatic deduplication"
        ]
      },
      {
        "category": "Reporting & Analytics",
        "icon": "üìä",
        "color": "purple",
        "items": [
          "Story point velocity tracking across sprints",
          "Per-assignee task and point breakdown",
          "Carried-over task analysis with context",
          "HTML-formatted email reports with tables and links"
        ]
      },
      {
        "category": "Resilience",
        "icon": "üõ°Ô∏è",
        "color": "orange",
        "items": [
          "Rate limit handling with header-based backoff",
          "Mapping rebuild from cross-referenced task IDs",
          "Exponential retry with graceful degradation",
          "State file consistency checks before each sync"
        ]
      }
    ],
    "suggested_connectors": [
      {
        "name": "clickup",
        "label": "ClickUp",
        "auth_type": "api_key",
        "credential_fields": [
          {
            "key": "api_key",
            "label": "API Token",
            "type": "password",
            "placeholder": "pk_12345678_ABCDEFGHIJKLMNOP",
            "helpText": "Go to ClickUp ‚Üí Settings ‚Üí Apps ‚Üí Generate API Token",
            "required": true
          },
          {
            "key": "team_id",
            "label": "Team (Workspace) ID",
            "type": "text",
            "placeholder": "9012345",
            "helpText": "Found in your ClickUp workspace URL or via GET /api/v2/team",
            "required": true
          },
          {
            "key": "list_id",
            "label": "Sprint List ID",
            "type": "text",
            "placeholder": "901234567",
            "helpText": "The ClickUp List ID for your sprint backlog. Right-click the list ‚Üí Copy Link to find it.",
            "required": true
          }
        ],
        "setup_instructions": "1. Log into ClickUp and go to Settings ‚Üí Apps.\n2. Click 'Generate' under API Token to create a Personal API Token.\n3. Copy the token (starts with 'pk_').\n4. Find your Team ID: go to your workspace, the URL contains it, or call GET https://api.clickup.com/api/v2/team with your token.\n5. Find your Sprint List ID: right-click the sprint backlog list ‚Üí Copy Link. The list ID is the number in the URL.\n6. Enter all three values in the fields above.",
        "related_tools": [
          "http_request"
        ],
        "related_triggers": [
          0,
          1,
          2
        ],
        "api_base_url": "https://api.clickup.com/api/v2"
      },
      {
        "name": "github",
        "label": "GitHub",
        "auth_type": "pat",
        "credential_fields": [
          {
            "key": "pat",
            "label": "Personal Access Token",
            "type": "password",
            "placeholder": "github_pat_xxxxxxxxxxxxx",
            "helpText": "GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Fine-grained tokens. Needs 'Issues: Read and write' and 'Metadata: Read' permissions.",
            "required": true
          },
          {
            "key": "owner",
            "label": "Repository Owner",
            "type": "text",
            "placeholder": "my-org",
            "helpText": "The GitHub organization or username that owns the repository",
            "required": true
          },
          {
            "key": "repo",
            "label": "Repository Name",
            "type": "text",
            "placeholder": "my-project",
            "helpText": "The repository where sprint issues will be created",
            "required": true
          }
        ],
        "setup_instructions": "1. Go to GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Fine-grained tokens.\n2. Click 'Generate new token'.\n3. Set the resource owner to your organization (or personal account).\n4. Under 'Repository access', select the target repository.\n5. Under 'Permissions', enable: Issues (Read and write), Metadata (Read).\n6. Generate the token and copy it.\n7. Enter the token, repository owner, and repository name in the fields above.",
        "related_tools": [
          "http_request"
        ],
        "related_triggers": [
          0,
          1,
          2
        ],
        "api_base_url": "https://api.github.com"
      },
      {
        "name": "google_workspace",
        "label": "Google Workspace (Gmail)",
        "auth_type": "oauth2",
        "credential_fields": [
          {
            "key": "client_id",
            "label": "OAuth Client ID",
            "type": "text",
            "placeholder": "123456789-abc.apps.googleusercontent.com",
            "helpText": "From Google Cloud Console ‚Üí APIs & Services ‚Üí Credentials",
            "required": true
          },
          {
            "key": "client_secret",
            "label": "OAuth Client Secret",
            "type": "password",
            "placeholder": "GOCSPX-xxxxxxxxxxxxx",
            "helpText": "From Google Cloud Console ‚Üí APIs & Services ‚Üí Credentials",
            "required": true
          },
          {
            "key": "stakeholder_emails",
            "label": "Stakeholder Email List",
            "type": "text",
            "placeholder": "team@company.com, pm@company.com",
            "helpText": "Comma-separated email addresses that receive sprint kickoff and summary emails",
            "required": true
          }
        ],
        "setup_instructions": "1. Go to Google Cloud Console ‚Üí APIs & Services ‚Üí Library.\n2. Enable the Gmail API.\n3. Go to APIs & Services ‚Üí Credentials ‚Üí Create Credentials ‚Üí OAuth 2.0 Client ID.\n4. Set application type to 'Desktop app'.\n5. Copy the Client ID and Client Secret.\n6. Complete the OAuth consent screen configuration.\n7. Enter the credentials and your stakeholder distribution list above.",
        "related_tools": [
          "gmail_send",
          "gmail_search"
        ],
        "related_triggers": [
          0,
          2
        ],
        "api_base_url": "https://www.googleapis.com"
      }
    ],
    "suggested_notification_channels": [
      {
        "type": "email",
        "description": "Sprint kickoff notifications and end-of-sprint summary reports sent to the stakeholder distribution list",
        "required_connector": "google_workspace",
        "config_hints": {
          "to": "stakeholder_emails from connector config"
        }
      }
    ],
    "suggested_event_subscriptions": [
      {
        "event_type": "sprint_start",
        "description": "Listen for sprint start events to trigger the full kickoff workflow: backlog fetch, GitHub issue creation, and stakeholder email"
      },
      {
        "event_type": "sprint_end",
        "description": "Listen for sprint end events to trigger summary report generation, task archival, milestone closure, and report email"
      },
      {
        "event_type": "task_status_changed",
        "description": "Listen for task status change events during mid-sprint polling to trigger bidirectional sync between ClickUp and GitHub"
      }
    ],
    "use_case_flows": [
      {
        "id": "flow_sprint_start",
        "name": "Sprint Kickoff",
        "description": "Reads the ClickUp sprint backlog, creates GitHub tracking issues with labels and milestones, and emails the sprint plan to stakeholders.",
        "nodes": [
          {
            "id": "ss1",
            "type": "start",
            "label": "Sprint start trigger fires",
            "detail": "Scheduled Monday 9 AM or manual trigger"
          },
          {
            "id": "ss2",
            "type": "connector",
            "label": "Fetch ClickUp backlog",
            "detail": "GET /api/v2/list/{list_id}/task ‚Äî retrieves all tasks in the sprint list with statuses, priorities, assignees, and custom fields",
            "connector": "clickup"
          },
          {
            "id": "ss3",
            "type": "decision",
            "label": "Backlog empty?",
            "detail": "Check if the sprint list contains any tasks"
          },
          {
            "id": "ss4",
            "type": "connector",
            "label": "Create GitHub milestone",
            "detail": "POST /repos/{owner}/{repo}/milestones ‚Äî creates a milestone named after the sprint with the sprint end date as due date",
            "connector": "github"
          },
          {
            "id": "ss5",
            "type": "action",
            "label": "Map tasks to issues",
            "detail": "For each ClickUp task: map priority to P0-P3 labels, map tags to type labels (bug/feature/chore), format issue body with ClickUp link and description"
          },
          {
            "id": "ss6",
            "type": "connector",
            "label": "Create GitHub issues",
            "detail": "POST /repos/{owner}/{repo}/issues ‚Äî creates one issue per task with title, body, labels, assignees, and milestone reference",
            "connector": "github"
          },
          {
            "id": "ss7",
            "type": "action",
            "label": "Save mapping file",
            "detail": "Write sprint_mapping.json with ClickUp task ID ‚Üí GitHub issue number pairs, and initialize sprint_state.json with current statuses"
          },
          {
            "id": "ss8",
            "type": "action",
            "label": "Compose kickoff email",
            "detail": "Build HTML email with sprint name, date range, total story points, task table grouped by assignee, key deliverables, and links to ClickUp list and GitHub milestone"
          },
          {
            "id": "ss9",
            "type": "connector",
            "label": "Send kickoff email",
            "detail": "gmail_send to stakeholder distribution list with HTML body and sprint subject line",
            "connector": "google_workspace"
          },
          {
            "id": "ss10",
            "type": "event",
            "label": "Emit sprint_started event",
            "detail": "Log sprint kickoff with task count, point total, and issue creation results"
          },
          {
            "id": "ss11",
            "type": "end",
            "label": "Sprint kickoff complete"
          },
          {
            "id": "ss_err1",
            "type": "error",
            "label": "Empty backlog alert",
            "error_message": "Sprint backlog is empty ‚Äî sending alert email to stakeholders instead of kickoff summary"
          },
          {
            "id": "ss_err2",
            "type": "error",
            "label": "API failure recovery",
            "error_message": "ClickUp or GitHub API returned errors after retries ‚Äî partial sync logged, stakeholders notified of issues"
          }
        ],
        "edges": [
          {
            "id": "sse1",
            "source": "ss1",
            "target": "ss2"
          },
          {
            "id": "sse2",
            "source": "ss2",
            "target": "ss3"
          },
          {
            "id": "sse3",
            "source": "ss3",
            "target": "ss_err1",
            "label": "Yes (empty)",
            "variant": "yes"
          },
          {
            "id": "sse4",
            "source": "ss3",
            "target": "ss4",
            "label": "No (has tasks)",
            "variant": "no"
          },
          {
            "id": "sse5",
            "source": "ss4",
            "target": "ss5"
          },
          {
            "id": "sse6",
            "source": "ss5",
            "target": "ss6"
          },
          {
            "id": "sse7",
            "source": "ss6",
            "target": "ss7"
          },
          {
            "id": "sse8",
            "source": "ss7",
            "target": "ss8"
          },
          {
            "id": "sse9",
            "source": "ss8",
            "target": "ss9"
          },
          {
            "id": "sse10",
            "source": "ss9",
            "target": "ss10"
          },
          {
            "id": "sse11",
            "source": "ss10",
            "target": "ss11"
          },
          {
            "id": "sse12",
            "source": "ss_err1",
            "target": "ss9",
            "variant": "error"
          },
          {
            "id": "sse13",
            "source": "ss6",
            "target": "ss_err2",
            "variant": "error"
          }
        ]
      },
      {
        "id": "flow_mid_sprint_sync",
        "name": "Mid-Sprint Status Sync",
        "description": "Polls ClickUp for task status changes every 5 minutes and synchronizes them bidirectionally with GitHub issues ‚Äî updating labels, closing completed issues, and creating issues for newly added tasks.",
        "nodes": [
          {
            "id": "ms1",
            "type": "start",
            "label": "Polling trigger fires",
            "detail": "Every 5 minutes during active sprint"
          },
          {
            "id": "ms2",
            "type": "action",
            "label": "Load current state",
            "detail": "Read sprint_mapping.json and sprint_state.json to get last known task statuses and ID mappings"
          },
          {
            "id": "ms3",
            "type": "connector",
            "label": "Poll ClickUp tasks",
            "detail": "GET /api/v2/list/{list_id}/task?order_by=updated&reverse=true ‚Äî fetches tasks ordered by most recently updated",
            "connector": "clickup"
          },
          {
            "id": "ms4",
            "type": "action",
            "label": "Diff against state",
            "detail": "Compare fetched task statuses against sprint_state.json to identify changes, new tasks, and removed tasks"
          },
          {
            "id": "ms5",
            "type": "decision",
            "label": "Changes detected?",
            "detail": "Check if any tasks have new statuses, new tasks were added, or tasks were removed since last poll"
          },
          {
            "id": "ms6",
            "type": "connector",
            "label": "Sync to GitHub",
            "detail": "For each changed task: PATCH /repos/{owner}/{repo}/issues/{number} to update labels and state. For new tasks: POST to create issues. Adds sync comments to issues.",
            "connector": "github"
          },
          {
            "id": "ms7",
            "type": "connector",
            "label": "Check GitHub changes",
            "detail": "GET /repos/{owner}/{repo}/issues?since={last_check} ‚Äî detect issues closed or relabeled directly in GitHub",
            "connector": "github"
          },
          {
            "id": "ms8",
            "type": "decision",
            "label": "GitHub changes found?",
            "detail": "Check if any GitHub issues were modified outside of the sync process"
          },
          {
            "id": "ms9",
            "type": "connector",
            "label": "Sync back to ClickUp",
            "detail": "PUT /api/v2/task/{task_id} ‚Äî update ClickUp task status to match GitHub issue state changes",
            "connector": "clickup"
          },
          {
            "id": "ms10",
            "type": "action",
            "label": "Update state files",
            "detail": "Write updated sprint_state.json with current statuses and sprint_mapping.json with any new task mappings"
          },
          {
            "id": "ms11",
            "type": "event",
            "label": "Log sync cycle",
            "detail": "Emit execution_flow event with count of synced changes, direction, and any errors"
          },
          {
            "id": "ms12",
            "type": "end",
            "label": "Sync cycle complete"
          },
          {
            "id": "ms_err",
            "type": "error",
            "label": "Sync failure",
            "error_message": "API call failed after retries ‚Äî state file not updated, will retry on next poll cycle"
          }
        ],
        "edges": [
          {
            "id": "mse1",
            "source": "ms1",
            "target": "ms2"
          },
          {
            "id": "mse2",
            "source": "ms2",
            "target": "ms3"
          },
          {
            "id": "mse3",
            "source": "ms3",
            "target": "ms4"
          },
          {
            "id": "mse4",
            "source": "ms4",
            "target": "ms5"
          },
          {
            "id": "mse5",
            "source": "ms5",
            "target": "ms6",
            "label": "Yes",
            "variant": "yes"
          },
          {
            "id": "mse6",
            "source": "ms5",
            "target": "ms7",
            "label": "No",
            "variant": "no"
          },
          {
            "id": "mse7",
            "source": "ms6",
            "target": "ms7"
          },
          {
            "id": "mse8",
            "source": "ms7",
            "target": "ms8"
          },
          {
            "id": "mse9",
            "source": "ms8",
            "target": "ms9",
            "label": "Yes",
            "variant": "yes"
          },
          {
            "id": "mse10",
            "source": "ms8",
            "target": "ms10",
            "label": "No",
            "variant": "no"
          },
          {
            "id": "mse11",
            "source": "ms9",
            "target": "ms10"
          },
          {
            "id": "mse12",
            "source": "ms10",
            "target": "ms11"
          },
          {
            "id": "mse13",
            "source": "ms11",
            "target": "ms12"
          },
          {
            "id": "mse14",
            "source": "ms6",
            "target": "ms_err",
            "variant": "error"
          },
          {
            "id": "mse15",
            "source": "ms_err",
            "target": "ms12",
            "variant": "error"
          }
        ]
      },
      {
        "id": "flow_sprint_end",
        "name": "Sprint Close & Report",
        "description": "Compiles sprint metrics, generates a velocity report, archives completed tasks in ClickUp, closes the GitHub milestone, and emails the summary to stakeholders.",
        "nodes": [
          {
            "id": "se1",
            "type": "start",
            "label": "Sprint end trigger fires",
            "detail": "Scheduled Friday 5 PM or manual trigger"
          },
          {
            "id": "se2",
            "type": "action",
            "label": "Load sprint data",
            "detail": "Read sprint_mapping.json, sprint_state.json, and sprint_history.json for current and historical sprint context"
          },
          {
            "id": "se3",
            "type": "connector",
            "label": "Fetch final task statuses",
            "detail": "GET /api/v2/list/{list_id}/task ‚Äî get definitive end-of-sprint statuses for all tasks including custom fields (story points)",
            "connector": "clickup"
          },
          {
            "id": "se4",
            "type": "action",
            "label": "Compile sprint metrics",
            "detail": "Calculate: tasks planned vs completed vs carried over, story points committed vs delivered, per-assignee breakdown, velocity comparison with previous sprints"
          },
          {
            "id": "se5",
            "type": "connector",
            "label": "Archive completed tasks",
            "detail": "PUT /api/v2/task/{task_id} ‚Äî move completed tasks to 'Done' status or archive list in ClickUp",
            "connector": "clickup"
          },
          {
            "id": "se6",
            "type": "connector",
            "label": "Close GitHub milestone",
            "detail": "PATCH /repos/{owner}/{repo}/milestones/{number} with state: 'closed' and add completion comment to remaining open issues noting carry-over",
            "connector": "github"
          },
          {
            "id": "se7",
            "type": "action",
            "label": "Generate HTML report",
            "detail": "Build rich HTML email with summary table, burndown data, assignee breakdown, carried-over items, velocity trend chart description, and links"
          },
          {
            "id": "se8",
            "type": "connector",
            "label": "Send summary email",
            "detail": "gmail_send HTML report to stakeholder list with subject 'Sprint {name} Complete ‚Äî {delivered}/{committed} points ({pct}%)'",
            "connector": "google_workspace"
          },
          {
            "id": "se9",
            "type": "action",
            "label": "Update history & cleanup",
            "detail": "Append sprint metrics to sprint_history.json, archive current sprint_mapping.json and sprint_state.json with sprint name prefix"
          },
          {
            "id": "se10",
            "type": "event",
            "label": "Emit sprint_completed event",
            "detail": "Log sprint completion with final metrics for agent_memory velocity tracking"
          },
          {
            "id": "se11",
            "type": "end",
            "label": "Sprint close complete"
          }
        ],
        "edges": [
          {
            "id": "see1",
            "source": "se1",
            "target": "se2"
          },
          {
            "id": "see2",
            "source": "se2",
            "target": "se3"
          },
          {
            "id": "see3",
            "source": "se3",
            "target": "se4"
          },
          {
            "id": "see4",
            "source": "se4",
            "target": "se5"
          },
          {
            "id": "see5",
            "source": "se5",
            "target": "se6"
          },
          {
            "id": "see6",
            "source": "se6",
            "target": "se7"
          },
          {
            "id": "see7",
            "source": "se7",
            "target": "se8"
          },
          {
            "id": "see8",
            "source": "se8",
            "target": "se9"
          },
          {
            "id": "see9",
            "source": "se9",
            "target": "se10"
          },
          {
            "id": "see10",
            "source": "se10",
            "target": "se11"
          }
        ]
      }
    ]
  }
}
